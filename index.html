<!DOCTYPE html>
<html ng-app='app'>
<head>

    <link rel="stylesheet" href="release/styles/ae-menu.css">
    <link rel="stylesheet" href="release/styles/ae-menu-bar.css">

    <style>
        * {
            box-sizing: border-box;
        }
        :before, :after; {
            box-sizing: border-box;
        }
        body {
            font-family: 'segoe ui', 'ubuntu', 'helvetica neue', sans-serif;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.17/angular.min.js"></script>
    <script>

        angular.module('app', [])

            .controller('Example1Ctrl', function ($scope) {
                $scope.items= [
                    { title: 'Menu Item 1' },
                    { title: 'Menu Item 2' },
                    { title: 'Menu Item 3', items: [
                        { title: 'Menu Item 3.1' },
                        { title: 'Menu Item 3.2' }
                    ]}
                ]
            })

            .directive('aeMenu', function () { return {
                restrict: 'A',
                template: ''+
                    '<li ae-menu-item ng-repeat="item in items" ng-class="{\'ae-menu__item-container\':item.items}"></li>'+
                '',
                scope: {
                    items: '=menuItems'
                },
                controller: function ($scope) {

                },
                link: function ($scope, $e, $a) {
                    console.log('link aeMenu')
                }
            }})

            .directive('aeMenuItem', function ($compile) { return {
                require: '^aeMenu',
                restrict: 'A',
                template: ''+
                    '<label>{{item.title}}</label>'+
                '',
                link: function ($scope, $e, $a) {
                    console.log('link aeMenuItem', $scope.item)
                    if ($scope.item.items) {
                        $e.append(
                            $compile('<menu class="ae-menu" ae-menu menu-items="item.items"></menu>')($scope)
                        )
                    }
                }
            }})
        ;

    </script>

</head><body>

    <menu class="ae-menu-bar">
        <li><label>Item 1</label></li>
        <li><label>Item 2</label></li>
        <li class="ae-menu-bar__item-container"><label>Item 3</label>
            <menu class="ae-menu">
                <li><a>Menu Item 3.1</a></li>
                <li class="ae-menu__item-container"><label>Menu Item 3.2</label>
                    <menu class="ae-menu">
                        <li><a>Menu Item 3.2.1</a></li>
                        <li><a>Menu Item 3.2.2</a></li>
                        <li class="ae-menu__item-container"><label>Menu Item 3.2.3</label>
                            <menu class="ae-menu">
                                <li><a>Menu Item 3.2.3.1</a></li>
                                <li><a>Menu Item 3.2.3.2</a></li>
                                <li><a>Menu Item 3.2.3.3</a></li>
                            </menu>
                        </li>
                    </menu>
                </li>
                <li class="ae-menu__item-container"><label>Menu Item 3.3</label>
                    <menu class="ae-menu">
                        <li><a>Menu Item 3.3.1</a></li>
                        <li><a>Menu Item 3.3.2</a></li>
                        <li class="ae-menu__item-container"><label>Menu Item 3.3.3</label>
                            <menu class="ae-menu">
                                <li><a>Menu Item 3.3.3.1</a></li>
                                <li><a>Menu Item 3.3.3.2</a></li>
                                <li><a>Menu Item 3.3.3.3</a></li>
                            </menu>
                        </li>
                    </menu>
                </li>
                <li class="ae-menu__item-separator"></li>
                <li class="ae-menu__item-container"><label>Menu Item 3.4</label>
                    <menu class="ae-menu">
                        <li><a>Menu Item 3.4.1</a></li>
                        <li><a>Menu Item 3.4.2</a></li>
                        <li class="ae-menu__item-container"><label>Menu Item 3.4.3</label>
                            <menu class="ae-menu">
                                <li><a>Menu Item 3.4.3.1</a></li>
                                <li><a>Menu Item 3.4.3.2</a></li>
                                <li><a>Menu Item 3.4.3.3</a></li>
                            </menu>
                        </li>
                    </menu>
                </li>
            </menu>
        </li>
    </menu>

    <hr/>

    <div ng-controller='Example1Ctrl'>
        <menu class="ae-menu" ae-menu menu-items='items'></menu>
    </div>

</body>
</html>
